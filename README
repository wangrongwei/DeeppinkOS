UNIX386
========

一个i386架构的简单内核

借鉴了《30天自制操作系统》、《一个orange操作系统的实现》和《linux内核设计的艺
术》相关代码，对其中思路重新调整，多处初始化流程细节不在按照经典的启动流程来，
采用简单和便于理解的方式对内核完善。

当前两个分支
------------
	master：master分支可直接clone运行；
	new分：支属于正在开发中的分支，存在较多的bug，不能运行；

编译环境
========

    1. 编译环境：linux
    2. 编译器：gcc
    3. 汇编器：nasm
    4. 链接器：ld
    5. 仿真器：bochs
    6. 其他工具：objcopy

说明
=====

最开始，打算按照《30天自制操作系统》一书再次慢慢研究操作系统的设计知识，最后由
于将开发环境换成ubuntu，使用gcc和nasm编译整个内核，开始此计划时，内核相关知识有
但是还缺少实验，再加上对gcc和nasm编译一个x86文件感觉不太可能，参考了其他简单内
核，最终确定可以修改原来的Makefile文件，使用gcc和nasm。

推荐：使用bochs慢慢单步调试，这些问题都能发现。

DeeppinkOS文件结构(按照创建先后列出)
-------------------------------------

boot-------------------------------------------------------------   </br>
&emsp;&emsp;&emsp;|-------boot.asm   </br>
drivers----------------------------------------------------------  </br>
&emsp;&emsp;&emsp;|-------timer.c  </br>
&emsp;&emsp;&emsp;|-------keyboard.c  </br>
include----------------------------------------------------------  </br>
&emsp;&emsp;&emsp;|-------console.h  </br>
&emsp;&emsp;&emsp;|-------string.h  </br>
&emsp;&emsp;&emsp;|-------vargs.h  </br>
&emsp;&emsp;&emsp;|-------debug.h  </br>
&emsp;&emsp;&emsp;|-------descriptor.h  </br>
&emsp;&emsp;&emsp;|-------interrupt.h  </br>
&emsp;&emsp;&emsp;|-------timer.h  </br>
&emsp;&emsp;&emsp;|-------pmm.h  </br>
&emsp;&emsp;&emsp;|-------keyboard.h  </br>
&emsp;&emsp;&emsp;|-------keymap.h  </br>
init---------------------------------------------------------------  </br>
&emsp;&emsp;&emsp;|-------kernel.asm  </br>
&emsp;&emsp;&emsp;|-------start.c  </br>
&emsp;&emsp;&emsp;|-------console.c  </br>
&emsp;&emsp;&emsp;|-------interrupt.c  </br>
&emsp;&emsp;&emsp;|-------pmm.c  </br>
kernel-----------------------------------------------------------  </br>
&emsp;&emsp;&emsp;|-------prink.c  </br>
scripts----------------------------------------------------------  </br>
&emsp;&emsp;&emsp;|-------kernel.ld  </br>
doc----------------------------------------------------------  </br>
&emsp;&emsp;&emsp;|-------help.md  </br>
bochsout.txt--------------bochs调试输出（基本没用）  </br>
bochsrc-------------------bochs调试配置文件(使用指令：make bochs即可)  </br>
Makefile------------------make--->make qemu/make bochs  </br>
deeppink.img--------------最终生成的镜像文件  </br>
README.md-----------------帮助文档（遇到的相关bug和设计步骤）  </br>

运行说明
---------

该工程在ubuntu16.04和CentOS7上已测试通过，需要安装最新的bochs运行，可支持三种方
式：

    1. make bochs
    2. make qemu
    3. make debug

make debug表示以调试模式运行，详情可查看Makefile文档。

TODO
=====

    1. asm切换为.S
	2. 调度器
	3. buddy系统
	4. slab分配器
    5. 82258（DMA控制器）
    6. 8259A（中断控制器）
    7. 8272（磁盘控制器）
    8. 82385（Cache控制器）
    9. 82062（硬盘控制器）
    10. 8254（可编程定时/计数器）

正在完善中...


